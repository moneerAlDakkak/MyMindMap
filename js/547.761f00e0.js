"use strict";(self["webpackChunkmy_mind_map"]=self["webpackChunkmy_mind_map"]||[]).push([[547],{6043:function(e,t,a){a.r(t),a.d(t,{default:function(){return O}});var i=a(3396),s=a(7139),l=a(9242),d=a.p+"img/logo2.f9cd9533.svg",n=a(9574);const r=e=>((0,i.dD)("data-v-6c52822e"),e=e(),(0,i.Cn)(),e),o={class:"page",ref:"page"},p={key:0,id:"watermark"},u=r((()=>(0,i._)("img",{src:d,alt:"m"},null,-1))),c=r((()=>(0,i._)("img",{src:n,alt:"mmm"},null,-1))),m=r((()=>(0,i._)("br",null,null,-1))),b=(0,i.Uk)(" using My Mind Map ");function f(e,t,a,d,n,r){const f=(0,i.up)("idea-container"),h=(0,i.up)("m-poppup");return(0,i.wg)(),(0,i.iD)("div",o,[(0,i.Wm)(f,{ideas:JSON.stringify(e.$store.state.map.body),level:0,editable:"true"},null,8,["ideas"]),e.$store.state.map.headers.creator?((0,i.wg)(),(0,i.iD)("div",p,[u,c,(0,i._)("p",null,[(0,i.Uk)(" Created by "+(0,s.zw)(e.$store.state.map.headers.creator)+" ",1),m,b])])):(0,i.kq)("",!0),(0,i.Wm)(l.uT,{name:"fade-bottom"},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{ref:"pop"},null,512)])),_:1})],512)}function h(e,t,a,l,d,n){const r=(0,i.up)("text-bubble"),o=(0,i.up)("idea-container",!0);return Array.isArray(JSON.parse(a.ideas))?((0,i.wg)(),(0,i.iD)("section",{key:1,style:(0,s.j5)(`--items: ${JSON.parse(a.ideas).length}`)},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(JSON.parse(a.ideas),(e=>((0,i.wg)(),(0,i.j4)(o,{key:e,ideas:JSON.stringify(e),level:Number.parseInt(a.level)+1,editable:a.editable},null,8,["ideas","level","editable"])))),128))],4)):((0,i.wg)(),(0,i.j4)(r,{key:0,idea:JSON.parse(a.ideas),level:a.level,editable:a.editable},null,8,["idea","level","editable"]))}const g=["id"],v=(0,i.Uk)(" Add sub-bubble "),y=(0,i.Uk)(" Delete Map "),M=(0,i.Uk)(" Delete ");function w(e,t,a,d,n,r){const o=(0,i.up)("m-p"),p=(0,i.up)("m-menu-item"),u=(0,i.up)("m-menu");return(0,i.wg)(),(0,i.iD)("div",{id:a.idea.id,class:(0,s.C_)(`bubble level-${a.level} ${a.idea.style||""}`),onContextmenu:t[5]||(t[5]=(0,l.iM)((t=>e.$refs.menu.show(t)),["prevent"]))},[(0,i.Wm)(o,{ref:"mdtext",spellcheck:"false",contenteditable:a.editable,onBlur:t[0]||(t[0]=t=>r.editBubble(n.map,e.id,t)),onInput:t[1]||(t[1]=t=>e.$store.dispatch("saveMap")),math:""},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(a.idea.content),1)])),_:1},8,["contenteditable"]),(0,i.Wm)(l.uT,{name:"fade-top"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{ref:"menu"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{onClick:t[2]||(t[2]=e=>r.addSubBubble(n.map,a.idea.id)),"icon-start":"fas fa-plus"},{default:(0,i.w5)((()=>[v])),_:1}),1==a.idea.id?((0,i.wg)(),(0,i.j4)(p,{key:0,type:"danger","icon-start":"fas fa-trash",onClick:t[3]||(t[3]=t=>e.$store.dispatch("deleteMap"))},{default:(0,i.w5)((()=>[y])),_:1})):(0,i.kq)("",!0),1!=a.idea.id?((0,i.wg)(),(0,i.j4)(p,{key:1,type:"danger","icon-start":"fas fa-trash",onClick:t[4]||(t[4]=e=>r.deleteBubble(n.map,a.idea.id))},{default:(0,i.w5)((()=>[M])),_:1})):(0,i.kq)("",!0)])),_:1},512)])),_:1})],42,g)}var k=a(444),_={name:"TextBubble",components:{MP:k.MP,MMenu:k.MMenu,MMenuItem:k.MMenuItem},props:["idea","level","editable"],data(){return{map:this.$store.state.map.body}},methods:{addSubBubble(e,t){this.$store.commit("increaseID","bubble"),e[0].id!=t?e.forEach((a=>{a.id===this.idea.id?e.splice(e.findIndex((e=>e.id===t)),1,[a,{content:"New Cell",id:this.$store.state.BUBBLE_ID}]):Array.isArray(a)&&this.addSubBubble(a,t)})):e.push({content:"New Cell",id:this.$store.state.BUBBLE_ID})},editBubble(e,t,a){e.forEach((e=>{e.id==this.idea.id?e.content=this.$refs.mdtext.getRawContent():Array.isArray(e)&&this.editBubble(e,t,a)}))},deleteBubble(e,t){1!=t&&e.forEach((a=>{e[0].id===t?(e.splice(0,e.length),this.$store.commit("clearEmpty")):e.some((e=>e.id===t))?e.splice(e.findIndex((e=>e.id===t)),1):Array.isArray(a)&&this.deleteBubble(a,t)}))}}},$=a(89);const B=(0,$.Z)(_,[["render",w],["__scopeId","data-v-729ee7bc"]]);var I=B,S={name:"ideaContainer",data(){return{g:0}},components:{IdeaContainer:N,TextBubble:I},props:["ideas","level","editable"],methods:{countItems(e){let t=JSON.parse(e).filter((e=>Array.isArray(e))),a=JSON.parse(e).filter((e=>!Array.isArray(e)));return 0!==t.length?t.length:a.length}}};const C=(0,$.Z)(S,[["render",h],["__scopeId","data-v-4edbd8ef"]]);var N=C,A={name:"MapPage",data(){return{oldMap:void 0}},components:{ideaContainer:N,MPoppup:k.MPoppup},async beforeRouteLeave(){let e=JSON.stringify(this.$store.state.map);if(this.oldMap!==e){console.log(this.$refs.pop);let t=await this.$refs.pop.show({title:"Don't forget to save",message:"You haven't saved changes. Would you like to save before leave ?",confirm:"Save",cancel:"Leave"});return!t||(this.oldMap=e,this.$store.dispatch("saveMap"),!1)}},beforeMount(){let e=location.href.slice(location.href.indexOf("=")+1),t=JSON.parse(localStorage.getItem("myMaps"));const a=t.find((t=>t.headers.localId==e));this.oldMap=JSON.stringify(a),this.$store.commit("setMap",a),this.$MTheme.apply(a.headers.theme)}};const D=(0,$.Z)(A,[["render",f],["__scopeId","data-v-6c52822e"]]);var O=D},9574:function(e,t,a){e.exports=a.p+"img/logo.88978901.svg"}}]);
//# sourceMappingURL=547.761f00e0.js.map